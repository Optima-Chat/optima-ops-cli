{
  "$schema": "./services-config.schema.json",
  "environments": {
    "ec2-prod": {
      "type": "ec2",
      "host": "ec2-prod.optima.shop",
      "domain": "optima.shop",
      "dockerNetwork": "optima-prod",
      "description": "EC2 Docker Compose 生产环境"
    },
    "ecs-stage": {
      "type": "ecs",
      "cluster": "optima-stage-cluster",
      "domain": "stage.optima.onl",
      "description": "ECS Stage 环境"
    },
    "ecs-prod": {
      "type": "ecs",
      "cluster": "optima-prod-cluster",
      "domain": "optima.onl",
      "description": "ECS Prod 环境"
    },
    "bi-data": {
      "type": "ec2",
      "host": "bi-data.optima.onl",
      "domain": "bi-data.optima.onl",
      "description": "BI 数据机器 (ClickHouse + Kafka)",
      "services": ["clickhouse", "kafka", "zookeeper", "debezium"]
    }
  },
  "services": {
    "core": [
      {
        "name": "user-auth",
        "repo": "Optima-Chat/user-auth",
        "type": "core",
        "hasDatabase": true,
        "hasRedis": true,
        "environments": {
          "ec2-prod": {
            "container": "optima-user-auth-prod",
            "healthEndpoint": "https://auth.optima.shop/health"
          },
          "ecs-stage": {
            "service": "optima-stage-user-auth",
            "healthEndpoint": "https://auth.stage.optima.onl/health"
          },
          "ecs-prod": {
            "service": "optima-prod-user-auth",
            "healthEndpoint": "https://auth.optima.onl/health"
          }
        }
      },
      {
        "name": "mcp-host",
        "repo": "Optima-Chat/mcp-host",
        "type": "core",
        "hasDatabase": true,
        "hasRedis": false,
        "environments": {
          "ec2-prod": {
            "container": "optima-mcp-host-prod",
            "healthEndpoint": "https://mcp.optima.shop/health"
          },
          "ecs-stage": {
            "service": "optima-stage-mcp-host",
            "healthEndpoint": "https://host.mcp.stage.optima.onl/health"
          },
          "ecs-prod": {
            "service": "optima-prod-mcp-host",
            "healthEndpoint": "https://host.mcp.optima.onl/health"
          }
        }
      },
      {
        "name": "commerce-backend",
        "repo": "Optima-Chat/commerce-backend",
        "type": "core",
        "hasDatabase": true,
        "hasRedis": true,
        "environments": {
          "ec2-prod": {
            "container": "optima-commerce-backend-prod",
            "healthEndpoint": "https://api.optima.shop/health"
          },
          "ecs-stage": {
            "service": "optima-stage-commerce-backend",
            "healthEndpoint": "https://api.stage.optima.onl/health"
          },
          "ecs-prod": {
            "service": "optima-prod-commerce-backend",
            "healthEndpoint": "https://api.optima.onl/health"
          }
        }
      },
      {
        "name": "agentic-chat",
        "repo": "Optima-Chat/agentic-chat",
        "type": "core",
        "hasDatabase": true,
        "hasRedis": false,
        "environments": {
          "ec2-prod": {
            "container": "optima-agentic-chat-prod",
            "healthEndpoint": "https://ai.optima.shop"
          },
          "ecs-stage": {
            "service": "optima-stage-agentic-chat",
            "healthEndpoint": "https://ai.stage.optima.onl"
          },
          "ecs-prod": {
            "service": "optima-prod-agentic-chat",
            "healthEndpoint": "https://ai.optima.onl"
          }
        }
      }
    ],
    "mcp": [
      {
        "name": "comfy-mcp",
        "repo": "Optima-Chat/comfy-mcp",
        "type": "mcp",
        "hasDatabase": false,
        "hasRedis": false,
        "environments": {
          "ec2-prod": {
            "container": "optima-comfy-mcp-prod",
            "healthEndpoint": "https://mcp-comfy.optima.shop/api/v1/health",
            "port": 8261
          },
          "ecs-stage": {
            "service": "optima-stage-comfy-mcp",
            "healthEndpoint": "https://comfy.mcp.stage.optima.onl/api/v1/health"
          },
          "ecs-prod": {
            "service": "optima-prod-comfy-mcp",
            "healthEndpoint": "https://comfy.mcp.optima.onl/api/v1/health"
          }
        }
      },
      {
        "name": "commerce-mcp",
        "repo": "Optima-Chat/commerce-mcp",
        "type": "mcp",
        "hasDatabase": false,
        "hasRedis": false,
        "environments": {
          "ec2-prod": {
            "container": "optima-commerce-mcp-prod",
            "healthEndpoint": "https://mcp-commerce.optima.shop/health",
            "port": 8270
          },
          "ecs-stage": {
            "service": "optima-stage-commerce-mcp",
            "healthEndpoint": "https://commerce.mcp.stage.optima.onl/health"
          },
          "ecs-prod": {
            "service": "optima-prod-commerce-mcp",
            "healthEndpoint": "https://commerce.mcp.optima.onl/health"
          }
        }
      },
      {
        "name": "ads-mcp",
        "repo": "Optima-Chat/google-ads-mcp",
        "type": "mcp",
        "hasDatabase": true,
        "hasRedis": false,
        "environments": {
          "ec2-prod": {
            "container": "optima-google-ads-mcp-prod",
            "healthEndpoint": "https://mcp-ads.optima.shop/health",
            "port": 8240
          },
          "ecs-stage": {
            "service": "optima-stage-ads-mcp",
            "healthEndpoint": "https://ads.mcp.stage.optima.onl/health"
          },
          "ecs-prod": {
            "service": "optima-prod-ads-mcp",
            "healthEndpoint": "https://ads.mcp.optima.onl/health"
          }
        }
      }
    ],
    "bi": [
      {
        "name": "bi-backend",
        "repo": "Optima-Chat/optima-bi",
        "type": "bi",
        "hasDatabase": true,
        "hasRedis": false,
        "environments": {
          "ecs-stage": {
            "service": "optima-stage-bi-backend",
            "healthEndpoint": "https://bi-api.stage.optima.onl/health"
          },
          "ecs-prod": {
            "service": "optima-prod-bi-backend",
            "healthEndpoint": "https://bi-api.optima.onl/health"
          }
        }
      },
      {
        "name": "bi-dashboard",
        "repo": "Optima-Chat/optima-bi",
        "type": "bi",
        "hasDatabase": false,
        "hasRedis": false,
        "environments": {
          "ecs-stage": {
            "service": "optima-stage-bi-dashboard",
            "healthEndpoint": "https://bi.stage.optima.onl"
          },
          "ecs-prod": {
            "service": "optima-prod-bi-dashboard",
            "healthEndpoint": "https://bi.optima.onl"
          }
        }
      },
      {
        "name": "bi-mcp",
        "repo": "Optima-Chat/optima-bi",
        "type": "bi",
        "hasDatabase": false,
        "hasRedis": false,
        "environments": {
          "ecs-stage": {
            "service": "optima-stage-bi-mcp",
            "healthEndpoint": "https://bi.mcp.stage.optima.onl/health"
          },
          "ecs-prod": {
            "service": "optima-prod-bi-mcp",
            "healthEndpoint": "https://bi.mcp.optima.onl/health"
          }
        }
      }
    ]
  }
}
